(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{5826:(e,t,c)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/purchase",function(){return c(2253)}])},2253:(e,t,c)=>{"use strict";c.r(t),c.d(t,{default:()=>n});var s=c(5893),a=c(7294),i=c(1163),r=c(7066);let n=()=>{let[e,t]=(0,a.useState)(null),[c,n]=(0,a.useState)(!0),[u,d]=(0,a.useState)(""),{id:o}=(0,i.useRouter)().query;(0,a.useEffect)(()=>{o&&r.Z.get("/api/products/".concat(o)).then(e=>{t(e.data),n(!1)}).catch(()=>{d("Failed to load product."),n(!1)})},[o]);let p=async()=>{try{let{id:e}=(await r.Z.post("/api/purchase",{product_id:o})).data;window.location.href="https://checkout.stripe.com/pay/".concat(e)}catch(e){d("Failed to initiate purchase.")}};return c?(0,s.jsx)("p",{children:"Loading..."}):u?(0,s.jsx)("p",{children:u}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{children:["Purchase ",e.title]}),(0,s.jsx)("p",{children:e.description}),(0,s.jsxs)("p",{children:["Price: $",e.price]}),(0,s.jsx)("button",{onClick:p,children:"Buy Now"})]})}},1163:(e,t,c)=>{e.exports=c(3079)}},e=>{var t=t=>e(e.s=t);e.O(0,[66,888,774,179],()=>t(5826)),_N_E=e.O()}]);