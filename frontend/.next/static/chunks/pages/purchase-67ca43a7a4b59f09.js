(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{1576:(t,e,c)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/purchase",function(){return c(7766)}])},7766:(t,e,c)=>{"use strict";c.r(e),c.d(e,{default:()=>n});var s=c(5893),i=c(7294),r=c(1163),a=c(7066);let n=()=>{let[t,e]=(0,i.useState)(null),[c,n]=(0,i.useState)(!0),[u,d]=(0,i.useState)(""),{id:o}=(0,r.useRouter)().query;(0,i.useEffect)(()=>{o&&a.Z.get("/api/products/".concat(o)).then(t=>{e(t.data),n(!1)}).catch(()=>{d("Failed to load product."),n(!1)})},[o]);let p=async()=>{try{let{id:t}=(await a.Z.post("/api/purchase",{product_id:o})).data;window.location.href="https://checkout.stripe.com/pay/".concat(t)}catch(t){d("Failed to initiate purchase.")}};return c?(0,s.jsx)("p",{children:"Loading..."}):u?(0,s.jsx)("p",{children:u}):t?(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{children:["Purchase ",t.title]}),(0,s.jsx)("p",{children:t.description}),(0,s.jsxs)("p",{children:["Price: $",t.price]}),(0,s.jsx)("button",{onClick:p,children:"Buy Now"})]}):(0,s.jsx)("p",{children:"Product not found"})}},1163:(t,e,c)=>{t.exports=c(3079)}},t=>{var e=e=>t(t.s=e);t.O(0,[66,888,774,179],()=>e(1576)),_N_E=t.O()}]);